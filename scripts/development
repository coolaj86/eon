#!/usr/bin/env node
'use strict';

var path = require('path');
var spawn = require('@ryanburnette/spawn-in-parallel');

var projectDir = path.resolve(__dirname, '../../..');
var themeDir = path.resolve(__dirname, '..');
var cacheDir = path.join(projectDir, '.hugo');

spawn([
  {
    cmd: `hugo server -D -p 3000 --cacheDir ${cacheDir}`,
    opts: {
      cwd: projectDir
    }
  },
  {
    cmd: 'npx webpack --config webpack.development.js --watch --colors',
    opts: {
      cwd: themeDir
    }
  }
]);
